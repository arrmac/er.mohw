/*! grafana - v1.7.0 - 2014-08-12
 * Copyright (c) 2014 Torkel Ã–degaard; Licensed Apache License */

define(["./helpers","controllers/row"],function(a){describe("RowCtrl",function(){var b=new a.ControllerTestContext;beforeEach(module("grafana.controllers")),beforeEach(b.providePhase()),beforeEach(b.createControllerPhase("RowCtrl")),describe("when getting rowSpan",function(){it("should return sum of panels spans",function(){var a=b.scope.rowSpan({panels:[{span:2},{span:3}]});expect(a).to.be(5)})}),describe("when adding panel to row with 12 span panel",function(){it("should split span in half and add panel with defaults",function(){b.scope.row={panels:[{span:12}]},b.scope.add_panel_default("graph"),expect(b.scope.row.panels[0].span).to.be(6),expect(b.scope.row.panels[1].span).to.be(6),expect(b.scope.row.panels[1].type).to.be("graph")})}),describe("when duplicating panel",function(){it("should try to add it to same row",function(){var a={span:4,attr:"123"};b.scope.row={panels:[a]},b.scope.duplicatePanel(a,b.scope.row),expect(b.scope.row.panels[0].span).to.be(4),expect(b.scope.row.panels[1].span).to.be(4),expect(b.scope.row.panels[1].attr).to.be("123")})}),describe("when duplicating panel",function(){it("should add row if there is no space left",function(){var a={span:12,attr:"123"};b.scope.row={panels:[a]},b.scope.dashboard={rows:[b.scope.row]},b.scope.duplicatePanel(a,b.scope.row),expect(b.scope.row.panels[0].span).to.be(12),expect(b.scope.row.panels.length).to.be(1),expect(b.scope.dashboard.rows[1].panels[0].attr).to.be("123")})})})});